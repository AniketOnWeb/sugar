#!/bin/sh

if test -z "$SUGAR_SCALING"; then
    export SUGAR_SCALING=100
fi

export GTK2_RC_FILES="@prefix@/share/sugar/data/sugar-$SUGAR_SCALING.gtkrc"

if ! test -f "$GTK2_RC_FILES"; then
    echo "sugar: ERROR: Gtk theme for scaling $SUGAR_SCALING not available in path $GTK2_RC_FILES"
    exit 1
fi

# Source debug definitions
if [ -f ~/.sugar/debug ]; then
        . ~/.sugar/debug
fi

matchbox-window-manager -use_titlebar no -theme sugar \
                        -kbdconfig @prefix@/share/sugar/data/kbdconfig &

exec sugar-session
